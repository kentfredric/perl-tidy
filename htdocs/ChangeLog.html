<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Perltidy Change Log</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#perltidy_change_log">Perltidy Change Log</a></li>
	<ul>

		<li><a href="#2006_07_19">2006 07 19</a></li>
		<li><a href="#2006_06_14">2006 06 14</a></li>
		<li><a href="#2003_10_21">2003 10 21</a></li>
		<li><a href="#2003_07_26">2003 07 26</a></li>
		<li><a href="#2002_11_30">2002 11 30</a></li>
		<li><a href="#2002_11_06">2002 11 06</a></li>
		<li><a href="#2002_09_22">2002 09 22</a></li>
		<li><a href="#2002_08_26">2002 08 26</a></li>
		<li><a href="#2002_04_25">2002 04 25</a></li>
		<li><a href="#2002_04_16">2002 04 16</a></li>
		<li><a href="#2002_02_25">2002 02 25</a></li>
		<li><a href="#2001_12_31">2001 12 31</a></li>
		<li><a href="#2001_11_28">2001 11 28</a></li>
		<li><a href="#2001_10_20">2001 10 20</a></li>
		<li><a href="#2001_10_16">2001 10 16</a></li>
		<li><a href="#2001_09_03">2001 09 03</a></li>
		<li><a href="#2001_07_31">2001 07 31</a></li>
		<li><a href="#2001_07_23">2001 07 23 </a></li>
		<li><a href="#2001_07_02">2001 07 02</a></li>
		<li><a href="#2001_07_01">2001 07 01</a></li>
		<li><a href="#2001_06_17">2001 06 17</a></li>
		<li><a href="#2001_06_08">2001 06 08</a></li>
		<li><a href="#2001_04_06">2001 04 06 </a></li>
		<li><a href="#2001_03_28_">2001 03 28:</a></li>
		<li><a href="#2001_03_23_">2001 03 23:</a></li>
		<li><a href="#2001_03_04_">2001 03 04:</a></li>
		<li><a href="#2001_03_03_">2001 03 03:</a></li>
	</ul>

</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="perltidy_change_log">Perltidy Change Log</a></h1>
<p>
</p>
<h2><a name="2006_07_19">2006 07 19</a></h2>
<pre>
 -Eliminated bug where a here-doc invoked through an 'e' modifier on a pattern
 replacement text was not recognized.  The tokenizer now recursively scans
 replacement text (but does not reformat it).</pre>
<pre>
 -Improved vertical alignment of terminal else blocks and ternary statements.
  Thanks to Chris for the suggestion.</pre>
<pre>
  OLD:
    if    ( IsBitmap() ) { return GetBitmap(); }
    elsif ( IsFiles() )  { return GetFiles(); }
    else { return GetText(); }</pre>
<pre>
  NEW:
    if    ( IsBitmap() ) { return GetBitmap(); }
    elsif ( IsFiles() )  { return GetFiles(); }
    else                 { return GetText(); }</pre>
<pre>
  OLD:
    $which_search =
        $opts{&quot;t&quot;} ? 'title'
      : $opts{&quot;s&quot;} ? 'subject'
      : $opts{&quot;a&quot;} ? 'author'
      : 'title';</pre>
<pre>
  NEW:
    $which_search =
        $opts{&quot;t&quot;} ? 'title'
      : $opts{&quot;s&quot;} ? 'subject'
      : $opts{&quot;a&quot;} ? 'author'
      :              'title';</pre>
<pre>
 -improved indentation of try/catch blocks and other externally defined
 functions accepting a block argument.  Thanks to jae.</pre>
<pre>
 -Added support for Perl 5.10 features say and smartmatch.</pre>
<pre>
 -Added flag -pbp (--perl-best-practices) as an abbreviation for parameters
 suggested in Damian Conway's &quot;Perl Best Practices&quot;.  -pbp is the same as:</pre>
<pre>
    -l=78 -i=4 -ci=4 -st -se -vt=2 -cti=0 -pt=1 -bt=1 -sbt=1 -bbt=1 -nsfs -nolq
    -wbb=&quot;% + - * / x != == &gt;= &lt;= =~ !~ &lt; &gt; | &amp; &gt;= &lt; = 
          **= += *= &amp;= &lt;&lt;= &amp;&amp;= -= /= |= &gt;&gt;= ||= .= %= ^= x=&quot;</pre>
<pre>
  Please note that the -st here restricts input to standard input; use
  -nst if necessary to override.</pre>
<pre>
 -Eliminated some needless breaks at equals signs in -lp indentation.</pre>
<pre>
    OLD:
        $c =
          Math::Complex-&gt;make(LEFT + $x * (RIGHT - LEFT) / SIZE,
                              TOP + $y * (BOTTOM - TOP) / SIZE);
    NEW:
        $c = Math::Complex-&gt;make(LEFT + $x * (RIGHT - LEFT) / SIZE,
                                 TOP + $y * (BOTTOM - TOP) / SIZE);</pre>
<pre>
 A break at an equals is sometimes useful for preventing complex statements 
 from hitting the line length limit.  The decision to do this was 
 over-eager in some cases and has been improved.  Thanks to Royce Reece.</pre>
<pre>
 -qw quotes contained in braces, square brackets, and parens are being
 treated more like those containers as far as stacking of tokens.  Also
 stack of closing tokens ending ');' will outdent to where the ');' would
 have outdented if the closing stack is matched with a similar opening stack.</pre>
<pre>
  OLD: perltidy -soc -sct
    __PACKAGE__-&gt;load_components(
        qw(
          PK::Auto
          Core
          )
    );
  NEW: perltidy -soc -sct
    __PACKAGE__-&gt;load_components( qw(
          PK::Auto
          Core
    ) );
  Thanks to Aran Deltac</pre>
<pre>
 -Eliminated some undesirable or marginally desirable vertical alignments.
 These include terminal colons, opening braces, and equals, and particularly
 when just two lines would be aligned.</pre>
<pre>
 OLD:
    my $accurate_timestamps = $Stamps{lnk};
    my $has_link            = 
        ...
 NEW:
    my $accurate_timestamps = $Stamps{lnk};
    my $has_link =</pre>
<pre>
 -Corrected a problem with -mangle in which a space would be removed
 between a keyword and variable beginning with ::.</pre>
<p>
</p>
<h2><a name="2006_06_14">2006 06 14</a></h2>
<pre>
 -Attribute argument lists are now correctly treated as quoted strings
 and not formatted.  This is the most important update in this version.
 Thanks to Borris Zentner, Greg Ferguson, Steve Kirkup.</pre>
<pre>
 -Updated to recognize the defined or operator, //, to be released in Perl 10.
 Thanks to Sebastien Aperghis-Tramoni.</pre>
<pre>
 -A useful utility perltidyrc_dump.pl is included in the examples section.  It
 will read any perltidyrc file and write it back out in a standard format
 (though comments are lost).</pre>
<pre>
 -Added option to have perltidy read and return a hash with the contents of a
 perltidyrc file.  This may be used by Leif Eriksen's tidyview code.  This
 feature is used by the demonstration program 'perltidyrc_dump.pl' in the
 examples directory.</pre>
<pre>
 -Improved error checking in perltidyrc files.  Unknown bare words were not
 being caught.</pre>
<pre>
 -The --dump-options parameter now dumps parameters in the format required by a
 perltidyrc file.</pre>
<pre>
 -V-Strings with underscores are now recognized.
 For example: $v = v1.2_3;</pre>
<pre>
 -cti=3 option added which gives one extra indentation level to closing 
 tokens always.  This provides more predictable closing token placement
 than cti=2.  If you are using cti=2 you might want to try cti=3.</pre>
<pre>
 -To identify all left-adjusted comments as static block comments, use C&lt;-sbcp='^#'&gt;.</pre>
<pre>
 -New parameters -fs, -fsb, -fse added to allow sections of code between #&lt;&lt;&lt;
 and #&gt;&gt;&gt; to be passed through verbatim. This is enabled by default and turned
 off by -nfs.  Flags -fsb and -fse allow other beginning and ending markers.
 Thanks to Wolfgang Werner and Marion Berryman for suggesting this.</pre>
<pre>
 -added flag -skp to put a space between all Perl keywords and following paren.
 The default is to only do this for certain keywords.  Suggested by
 H.Merijn Brand.</pre>
<pre>
 -added flag -sfp to put a space between a function name and following paren.
 The default is not to do this.  Suggested by H.Merijn Brand.</pre>
<pre>
 -Added patch to avoid breaking GetOpt::Long::Configure set by calling program. 
 Thanks to BOOK at CPAN.</pre>
<pre>
 -An error was fixed in which certain parameters in a .perltidyrc file given
 without the equals sign were not recognized.  That is,
 '--brace-tightness 0' gave an error but '--brace-tightness=0' worked
 ok.  Thanks to Zac Hansen.</pre>
<pre>
 -An error preventing the -nwrs flag from working was corrected. Thanks to
  Greg Ferguson.</pre>
<pre>
 -Corrected some alignment problems with entab option.</pre>
<pre>
 -A bug with the combination of -lp and -extrude was fixed (though this
 combination doesn't really make sense).  The bug was that a line with
 a single zero would be dropped.  Thanks to Cameron Hayne.</pre>
<pre>
 -Updated Windows detection code to avoid an undefined variable.
 Thanks to Joe Yates and Russ Jones.</pre>
<pre>
 -Improved formatting for short trailing statements following a closing paren.
 Thanks to Joe Matarazzo.</pre>
<pre>
 -The handling of the -icb (indent closing block braces) flag has been changed
 slightly to provide more consistent and predictable formatting of complex
 structures.  Instead of giving a closing block brace the indentation of the
 previous line, it is now given one extra indentation level.  The two methods
 give the same result if the previous line was a complete statement, as in this
 example:</pre>
<pre>
        if ($task) {
            yyy();
            }    # -icb
        else {
            zzz();
            }
 The change also fixes a problem with empty blocks such as:</pre>
<pre>
    OLD, -icb:
    elsif ($debug) {
    }</pre>
<pre>
    NEW, -icb:
    elsif ($debug) {
        }</pre>
<pre>
 -A problem with -icb was fixed in which a closing brace was misplaced when
 it followed a quote which spanned multiple lines.</pre>
<pre>
 -Some improved breakpoints for -wba='&amp;&amp; || and or'</pre>
<pre>
 -Fixed problem with misaligned cuddled else in complex statements
 when the -bar flag was also used.  Thanks to Alex and Royce Reese.</pre>
<pre>
 -Corrected documentation to show that --outdent-long-comments is the default.
 Thanks to Mario Lia.</pre>
<pre>
 -New flag -otr (opening-token-right) is similar to -bar (braces-always-right)
 but applies to non-structural opening tokens.</pre>
<pre>
 -new flags -sot (stack-opening-token), -sct (stack-closing-token).
 Suggested by Tony.</pre>
<p>
</p>
<h2><a name="2003_10_21">2003 10 21</a></h2>
<pre>
 -The default has been changed to not do syntax checking with perl.  
   Use -syn if you want it.  Perltidy is very robust now, and the -syn
   flag now causes more problems than it's worth because of BEGIN blocks
   (which get executed with perl -c).  For example, perltidy will never
   return when trying to beautify this code if -syn is used:</pre>
<pre>
        BEGIN { 1 while { }; }</pre>
<pre>
  Although this is an obvious error, perltidy is often run on untested
  code which is more likely to have this sort of problem.  A more subtle
  example is:</pre>
<pre>
        BEGIN { use FindBin; }</pre>
<pre>
  which may hang on some systems using -syn if a shared file system is
  unavailable.</pre>
<pre>
 -Changed style -gnu to use -cti=1 instead of -cti=2 (see next item).
  In most cases it looks better.  To recover the previous format, use
  '-gnu -cti=2'</pre>
<pre>
 -Added flags -cti=n for finer control of closing token indentation.
   -cti = 0 no extra indentation (default; same as -nicp)
   -cti = 1 enough indentation so that the closing token
        aligns with its opening token.
   -cti = 2 one extra indentation level if the line has the form 
          );   ];   or   };     (same as -icp).</pre>
<pre>
   The new option -cti=1 works well with -lp:</pre>
<pre>
   EXAMPLES:</pre>
<pre>
    # perltidy -lp -cti=1
    @month_of_year = (
                       'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                       'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
                     );</pre>
<pre>
    # perltidy -lp -cti=2
    @month_of_year = (
                       'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                       'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
                       );
  This is backwards compatible with -icp. See revised manual for
  details.  Suggested by Mike Pennington.
  
 -Added flag '--preserve-line-endings' or '-ple' to cause the output
  line ending to be the same as in the input file, for unix, dos, 
  or mac line endings.  Only works under unix. Suggested by 
  Rainer Hochschild.</pre>
<pre>
 -Added flag '--output-line-ending=s' or '-ole=s' where s=dos or win,
  unix, or mac.  Only works under unix.</pre>
<pre>
 -Files with Mac line endings should now be handled properly under unix
  and dos without being passed through a converter.</pre>
<pre>
 -You may now include 'and', 'or', and 'xor' in the list following
  '--want-break-after' to get line breaks after those keywords rather than
  before them.  Suggested by Rainer Hochschild.</pre>
<pre>
 -Corrected problem with command line option for -vtc=n and -vt=n. The
  equals sign was being eaten up by the Windows shell so perltidy didn't
  see it.</pre>
<p>
</p>
<h2><a name="2003_07_26">2003 07 26</a></h2>
<pre>
 -Corrected cause of warning message with recent versions of Perl:
    &quot;Possible precedence problem on bitwise &amp; operator at ...&quot;
  Thanks to Jim Files.</pre>
<pre>
 -fixed bug with -html with '=for pod2html' sections, in which code/pod
 output order was incorrect.  Thanks to Tassilo von Parseval.</pre>
<pre>
 -fixed bug when the -html flag is used, in which the following error
 message, plus others, appear:
     did not see &lt;body&gt; in pod2html output
 This was caused by a change in the format of html output by pod2html
 VERSION 1.04 (included with perl 5.8).  Thanks to Tassilo von Parseval.</pre>
<pre>
 -Fixed bug where an __END__ statement would be mistaken for a label
 if it is immediately followed by a line with a leading colon. Thanks
 to John Bayes.
 
 -Implemented guessing logic for brace types when it is ambiguous.  This
 has been on the TODO list a long time.  Thanks to Boris Zentner for
 an example.</pre>
<pre>
 -Long options may now be negated either as '--nolong-option' 
 or '--no-long-option'.  Thanks to Philip Newton for the suggestion.</pre>
<pre>
 -added flag --html-entities or -hent which controls the use of
 Html::Entities for html formatting.  Use --nohtml-entities or -nhent to
 prevent the use of Html::Entities to encode special symbols.  The
 default is -hent.  Html::Entities when formatting perl text to escape
 special symbols.  This may or may not be the right thing to do,
 depending on browser/language combinations.  Thanks to Burak Gursoy for
 this suggestion.</pre>
<pre>
 -Bareword strings with leading '-', like, '-foo' now count as 1 token
 for horizontal tightness.  This way $a{'-foo'}, $a{foo}, and $a{-foo}
 are now all treated similarly.  Thus, by default, OLD: $a{ -foo } will
 now be NEW: $a{-foo}.  Suggested by Mark Olesen.</pre>
<pre>
 -added 2 new flags to control spaces between keywords and opening parens:
   -sak=s  or --space-after-keyword=s,  and
   -nsak=s or --nospace-after-keyword=s, where 's' is a list of keywords.</pre>
<pre>
 The new default list of keywords which get a space is:</pre>
<pre>
   &quot;my local our and or eq ne if else elsif until unless while for foreach
     return switch case given when&quot;</pre>
<pre>
 Use -sak=s and -nsak=s to add and remove keywords from this list,
    respectively.</pre>
<pre>
 Explanation: Stephen Hildrey noted that perltidy was being inconsistent
 in placing spaces between keywords and opening parens, and sent a patch
 to give user control over this.  The above list was selected as being
 a reasonable default keyword list.  Previously, perltidy
 had a hardwired list which also included these keywords:</pre>
<pre>
        push pop shift unshift join split die</pre>
<pre>
 but did not have 'our'.  Example: if you prefer to make perltidy behave
 exactly as before, you can include the following two lines in your
 .perltidyrc file:</pre>
<pre>
   -sak=&quot;push pop local shift unshift join split die&quot;
   -nsak=&quot;our&quot;</pre>
<pre>
 -Corrected html error in .toc file when -frm -html is used (extra &quot;);
  browsers were tolerant of it.</pre>
<pre>
 -Improved alignment of chains of binary and ?/: operators. Example:
  OLD:
    $leapyear =
      $year % 4     ? 0
      : $year % 100 ? 1
      : $year % 400 ? 0
      : 1;
  NEW:
    $leapyear =
        $year % 4   ? 0
      : $year % 100 ? 1
      : $year % 400 ? 0
      : 1;</pre>
<pre>
 -improved breakpoint choices involving '-&gt;'</pre>
<pre>
 -Corrected tokenization of things like ${#} or ${©}. For example,
  ${©} is valid, but ${© } is a syntax error.</pre>
<pre>
 -Corrected minor tokenization errors with indirect object notation.
  For example, 'new A::()' works now.</pre>
<pre>
 -Minor tokenization improvements; all perl code distributed with perl 5.8 
  seems to be parsed correctly except for one instance (lextest.t) 
  of the known bug.</pre>
<p>
</p>
<h2><a name="2002_11_30">2002 11 30</a></h2>
<pre>
 -Implemented scalar attributes.  Thanks to Sean Tobin for noting this.</pre>
<pre>
 -Fixed glitch introduced in previous release where -pre option
 was not outputting a leading html &lt;pre&gt; tag.</pre>
<pre>
 -Numerous minor improvements in vertical alignment, including the following:</pre>
<pre>
 -Improved alignment of opening braces in many cases.  Needed for improved
 switch/case formatting, and also suggested by Mark Olesen for sort/map/grep
 formatting.  For example:</pre>
<pre>
  OLD:
    @modified =
      map { $_-&gt;[0] }
      sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }
      map { [ $_, -M ] } @filenames;</pre>
<pre>
  NEW:
    @modified =
      map  { $_-&gt;[0] }
      sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }
      map  { [ $_, -M ] } @filenames;</pre>
<pre>
 -Eliminated alignments across unrelated statements. Example:
  OLD:
    $borrowerinfo-&gt;configure( -state =&gt; 'disabled' );
    $borrowerinfo-&gt;grid( -col        =&gt; 1, -row =&gt; 0, -sticky =&gt; 'w' );</pre>
<pre>
  NEW:  
    $borrowerinfo-&gt;configure( -state =&gt; 'disabled' );
    $borrowerinfo-&gt;grid( -col =&gt; 1, -row =&gt; 0, -sticky =&gt; 'w' );</pre>
<pre>
  Thanks to Mark Olesen for suggesting this.</pre>
<pre>
 -Improved alignement of '='s in certain cases.
  Thanks to Norbert Gruener for sending an example.</pre>
<pre>
 -Outdent-long-comments (-olc) has been re-instated as a default, since
  it works much better now.  Use -nolc if you want to prevent it.</pre>
<pre>
 -Added check for 'perltidy file.pl -o file.pl', which causes file.pl
 to be lost. (The -b option should be used instead). Thanks to mreister
 for reporting this problem.</pre>
<p>
</p>
<h2><a name="2002_11_06">2002 11 06</a></h2>
<pre>
 -Switch/case or given/when syntax is now recognized.  Its vertical alignment
 is not great yet, but it parses ok.  The words 'switch', 'case', 'given',
 and 'when' are now treated as keywords.  If this causes trouble with older
 code, we could introduce a switch to deactivate it.  Thanks to Stan Brown
 and Jochen Schneider for recommending this.</pre>
<pre>
 -Corrected error parsing sub attributes with call parameters.
 Thanks to Marc Kerr for catching this.</pre>
<pre>
 -Sub prototypes no longer need to be on the same line as sub names.</pre>
<pre>
 -a new flag -frm or --frames will cause html output to be in a
 frame, with table of contents in the left panel and formatted source
 in the right panel.  Try 'perltidy -html -frm somemodule.pm' for example.</pre>
<pre>
 -The new default for -html formatting is to pass the pod through Pod::Html.
 The result is syntax colored code within your pod documents. This can be
 deactivated with -npod.  Thanks to those who have written to discuss this,
 particularly Mark Olesen and Hugh Myers.</pre>
<pre>
 -the -olc (--outdent-long-comments) option works much better.  It now outdents
 groups of consecutive comments together, and by just the amount needed to
 avoid having any one line exceeding the maximum line length.</pre>
<pre>
 -block comments are now trimmed of trailing whitespace.</pre>
<pre>
 -if a directory specified with -opath does not exist, it will be created.</pre>
<pre>
 -a table of contents to packages and subs is output when -html is used.
 Use -ntoc to prevent this.</pre>
<pre>
 -fixed an unusual bug in which a 'for' statement following a 'format'
 statement was not correctly tokenized.  Thanks to Boris Zentner for
 catching this.</pre>
<pre>
 -Tidy.pm is no longer dependent on modules IO::Scalar and IO::ScalarArray.  
 There were some speed issues.  Suggested by Joerg Walter.</pre>
<pre>
 -The treatment of quoted wildcards (file globs) is now system-independent. 
 For example</pre>
<pre>
    perltidy 'b*x.p[lm]'</pre>
<pre>
 would match box.pl, box.pm, brinx.pm under any operating system.  Of
 course, anything unquoted will be subject to expansion by any shell.</pre>
<pre>
 -default color for keywords under -html changed from 
 SaddleBrown (#8B4513) to magenta4 (#8B008B).</pre>
<pre>
 -fixed an arg parsing glitch in which something like:
   perltidy quick-help
 would trigger the help message and exit, rather than operate on the
 file 'quick-help'.</pre>
<p>
</p>
<h2><a name="2002_09_22">2002 09 22</a></h2>
<pre>

 -New option '-b' or '--backup-and-modify-in-place' will cause perltidy to
 overwrite the original file with the tidied output file.  The original
 file will be saved with a '.bak' extension (which can be changed with
 -bext=s).  Thanks to Rudi Farkas for the suggestion.</pre>
<pre>
 -An index to all subs is included at the top of -html output, unless
 only the &lt;pre&gt; section is written.</pre>
<pre>
 -Anchor lines of the form &lt;a name=&quot;mysub&quot;&gt;&lt;/a&gt; are now inserted at key points
 in html output, such as before sub definitions, for the convenience of
 postprocessing scripts.  Suggested by Howard Owen.</pre>
<pre>
 -The cuddled-else (-ce) flag now also makes cuddled continues, like
 this:</pre>
<pre>
    while ( ( $pack, $file, $line ) = caller( $i++ ) ) {
       # bla bla
    } continue {
        $prevpack = $pack;
    }</pre>
<pre>
 Suggested by Simon Perreault.</pre>
<pre>
 -Fixed bug in which an extra blank line was added before an =head or 
 similar pod line after an __END__ or __DATA__ line each time 
 perltidy was run.  Also, an extra blank was being added after
 a terminal =cut.  Thanks to Mike Birdsall for reporting this.</pre>
<p>
</p>
<h2><a name="2002_08_26">2002 08 26</a></h2>
<pre>
 -Fixed bug in which space was inserted in a hyphenated hash key:
    my $val = $myhash{USER-NAME};
  was converted to:
    my $val = $myhash{USER -NAME}; 
  Thanks to an anonymous bug reporter at sourceforge.</pre>
<pre>
 -Fixed problem with the '-io' ('--indent-only') where all lines 
  were double spaced.  Thanks to Nick Andrew for reporting this bug.</pre>
<pre>
 -Fixed tokenization error in which something like '-e1' was 
  parsed as a number.</pre>
<pre>
 -Corrected a rare problem involving older perl versions, in which 
  a line break before a bareword caused problems with 'use strict'.
  Thanks to Wolfgang Weisselberg for noting this.</pre>
<pre>
 -More syntax error checking added.</pre>
<pre>
 -Outdenting labels (-ola) has been made the default, in order to follow the
  perlstyle guidelines better.  It's probably a good idea in general, but
  if you do not want this, use -nola in your .perltidyrc file.
  
 -Updated rules for padding logical expressions to include more cases.
  Thanks to Wolfgang Weisselberg for helpful discussions.</pre>
<pre>
 -Added new flag -osbc (--outdent-static-block-comments) which will
  outdent static block comments by 2 spaces (or whatever -ci equals).
  Requested by Jon Robison.</pre>
<p>
</p>
<h2><a name="2002_04_25">2002 04 25</a></h2>
<pre>

 -Corrected a bug, introduced in the previous release, in which some
  closing side comments (-csc) could have incorrect text.  This is
  annoying but will be correct the next time perltidy is run with -csc.</pre>
<pre>
 -Implemented XHTML patch submitted by Ville Skyttä.</pre>
<pre>
 -Fixed bug where whitespace was being removed between 'Bar' and '()' 
  in a use statement like:</pre>
<pre>
       use Foo::Bar ();</pre>
<pre>
  Thanks to Ville Skyttä for reporting this.</pre>
<pre>
 -Whenever possible, if a logical expression is broken with leading
  '&amp;&amp;', '||', 'and', or 'or', then the leading line will be padded
  with additional space to produce alignment.  This has been on the
  todo list for a long time; thanks to Frank Steinhauer for reminding
  me to do it.  Notice the first line after the open parens here:</pre>
<pre>
        OLD: perltidy -lp
        if (
             !param(&quot;rules.to.$linecount&quot;)
             &amp;&amp; !param(&quot;rules.from.$linecount&quot;)
             &amp;&amp; !param(&quot;rules.subject.$linecount&quot;)
             &amp;&amp; !(
                   param(&quot;rules.fieldname.$linecount&quot;)
                   &amp;&amp; param(&quot;rules.fieldval.$linecount&quot;)
             )
             &amp;&amp; !param(&quot;rules.size.$linecount&quot;)
             &amp;&amp; !param(&quot;rules.custom.$linecount&quot;)
          )</pre>
<pre>
        NEW: perltidy -lp
        if (
                !param(&quot;rules.to.$linecount&quot;)
             &amp;&amp; !param(&quot;rules.from.$linecount&quot;)
             &amp;&amp; !param(&quot;rules.subject.$linecount&quot;)
             &amp;&amp; !(
                      param(&quot;rules.fieldname.$linecount&quot;)
                   &amp;&amp; param(&quot;rules.fieldval.$linecount&quot;)
             )
             &amp;&amp; !param(&quot;rules.size.$linecount&quot;)
             &amp;&amp; !param(&quot;rules.custom.$linecount&quot;)
          )</pre>
<p>
</p>
<h2><a name="2002_04_16">2002 04 16</a></h2>
<pre>
 -Corrected a mistokenization of variables for a package with a name
  equal to a perl keyword.  For example:</pre>
<pre>
     my::qx();
     package my;
     sub qx{print &quot;Hello from my::qx\n&quot;;}</pre>
<pre>
  In this case, the leading 'my' was mistokenized as a keyword, and a
  space was being place between 'my' and '::'.  This has been
  corrected.  Thanks to Martin Sluka for discovering this.</pre>
<pre>
 -A new flag -bol (--break-at-old-logic-breakpoints)
  has been added to control whether containers with logical expressions
  should be broken open.  This is the default.</pre>
<pre>
 -A new flag -bok (--break-at-old-keyword-breakpoints)
  has been added to follow breaks at old keywords which return lists,
  such as sort and map.  This is the default.</pre>
<pre>
 -A new flag -bot (--break-at-old-trinary-breakpoints) has been added to
  follow breaks at trinary (conditional) operators.  This is the default.</pre>
<pre>
 -A new flag -cab=n has been added to control breaks at commas after
  '=&gt;' tokens.  The default is n=1, meaning break unless this breaks
  open an existing on-line container.</pre>
<pre>
 -A new flag -boc has been added to allow existing list formatting
  to be retained.  (--break-at-old-comma-breakpoints).  See updated manual.</pre>
<pre>
 -A new flag -iob (--ignore-old-breakpoints) has been added to
  prevent the locations of old breakpoints from influencing the output
  format.</pre>
<pre>
 -Corrected problem where nested parentheses were not getting full
  indentation.  This has been on the todo list for some time; thanks 
  to Axel Rose for a snippet demonstrating this issue.</pre>
<pre>
            OLD: inner list is not indented
            $this-&gt;sendnumeric(
                $this-&gt;server,
                (
                  $ret-&gt;name,        $user-&gt;username, $user-&gt;host,
                $user-&gt;server-&gt;name, $user-&gt;nick,     &quot;H&quot;
                ),
            );</pre>
<pre>
            NEW:
            $this-&gt;sendnumeric(
                $this-&gt;server,
                (
                    $ret-&gt;name,          $user-&gt;username, $user-&gt;host,
                    $user-&gt;server-&gt;name, $user-&gt;nick,     &quot;H&quot;
                ),
            );</pre>
<pre>
 -Code cleaned up by removing the following unused, undocumented flags.
  They should not be in any .perltidyrc files because they were just
  experimental flags which were never documented.  Most of them placed
  artificial limits on spaces, and Wolfgang Weisselberg convinced me that
  most of them they do more harm than good by causing unexpected results.</pre>
<pre>
  --maximum-continuation-indentation (-mci)
  --maximum-whitespace-columns
  --maximum-space-to-comment (-xsc)
  --big-space-jump (-bsj)</pre>
<pre>
 -Pod file 'perltidy.pod' has been appended to the script 'perltidy', and
  Tidy.pod has been append to the module 'Tidy.pm'.  Older MakeMaker's
  were having trouble.
 
 -A new flag -isbc has been added for more control on comments. This flag
  has the effect that if there is no leading space on the line, then the
  comment will not be indented, and otherwise it may be.  If both -ibc and
  -isbc are set, then -isbc takes priority.  Thanks to Frank Steinhauer
  for suggesting this.</pre>
<pre>
 -A new document 'stylekey.pod' has been created to quickly guide new users
  through the maze of perltidy style parameters.  An html version is 
  on the perltidy web page.  Take a look! It should be very helpful.</pre>
<pre>
 -Parameters for controlling 'vertical tightness' have been added:
  -vt and -vtc are the main controls, but finer control is provided
  with -pvt, -pcvt, -bvt, -bcvt, -sbvt, -sbcvt.  Block brace vertical
  tightness controls have also been added.
  See updated manual and also see 'stylekey.pod'. Simple examples:</pre>
<pre>
    # perltidy -lp -vt=1 -vtc=1
    @month_of_year = ( 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                       'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' );</pre>
<pre>
    # perltidy -lp -vt=1 -vtc=0
    @month_of_year = ( 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                       'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
    );</pre>
<pre>
 -Lists which do not format well in uniform columns are now better
  identified and formated.</pre>
<pre>
    OLD:
    return $c-&gt;create( 'polygon', $x, $y, $x + $ruler_info{'size'},
        $y + $ruler_info{'size'}, $x - $ruler_info{'size'},
        $y + $ruler_info{'size'} );</pre>
<pre>
    NEW:
    return $c-&gt;create(
        'polygon', $x, $y,
        $x + $ruler_info{'size'},
        $y + $ruler_info{'size'},
        $x - $ruler_info{'size'},
        $y + $ruler_info{'size'}
    );</pre>
<pre>
    OLD:
      radlablist($f1, pad('Initial', $p), $b-&gt;{Init}-&gt;get_panel_ref, 'None ',
                 'None', 'Default', 'Default', 'Simple', 'Simple');
    NEW:
      radlablist($f1,
                 pad('Initial', $p),
                 $b-&gt;{Init}-&gt;get_panel_ref,
                 'None ', 'None', 'Default', 'Default', 'Simple', 'Simple');</pre>
<pre>
 -Corrected problem where an incorrect html filename was generated for 
  external calls to Tidy.pm module.  Fixed incorrect html title when
  Tidy.pm is called with IO::Scalar or IO::Array source.</pre>
<pre>
 -Output file permissons are now set as follows.  An output script file
  gets the same permission as the input file, except that owner
  read/write permission is added (otherwise, perltidy could not be
  rerun).  Html output files use system defaults.  Previously chmod 0755
  was used in all cases.  Thanks to Mark Olesen for bringing this up.</pre>
<pre>
 -Missing semicolons will not be added in multi-line blocks of type
  sort, map, or grep.  This brings perltidy into closer agreement
  with common practice.  Of course, you can still put semicolons 
  there if you like.  Thanks to Simon Perreault for a discussion of this.</pre>
<pre>
 -Most instances of extra semicolons are now deleted.  This is
  particularly important if the -csc option is used.  Thanks to Wolfgang
  Weisselberg for noting this.  For example, the following line
  (produced by 'h2xs' :) has an extra semicolon which will now be
  removed:</pre>
<pre>
     BEGIN { plan tests =&gt; 1 };</pre>
<pre>
 -New parameter -csce (--closing-side-comment-else-flag) can be used
  to control what text is appended to 'else' and 'elsif' blocks.
  Default is to just add leading 'if' text to an 'else'.  See manual.</pre>
<pre>
 -The -csc option now labels 'else' blocks with additinal information
  from the opening if statement and elsif statements, if space.
  Thanks to Wolfgang Weisselberg for suggesting this.</pre>
<pre>
 -The -csc option will now remove any old closing side comments
  below the line interval threshold. Thanks to Wolfgang Weisselberg for
  suggesting this.</pre>
<pre>
 -The abbreviation feature, which was broken in the previous version,
  is now fixed.  Thanks to Michael Cartmell for noting this.</pre>
<pre>
 -Vertical alignment is now done for '||='  .. somehow this was 
  overlooked.</pre>
<p>
</p>
<h2><a name="2002_02_25">2002 02 25</a></h2>
<pre>
 -This version uses modules for the first time, and a standard perl
  Makefile.PL has been supplied.  However, perltidy may still be
  installed as a single script, without modules.  See INSTALL for
  details.</pre>
<pre>
 -The man page 'perl2web' has been merged back into the main 'perltidy'
  man page to simplify installation.  So you may remove that man page
  if you have an older installation.</pre>
<pre>
 -Added patch from Axel Rose for MacPerl.  The patch prompts the user
  for command line arguments before calling the module 
  Perl::Tidy::perltidy.</pre>
<pre>
 -Corrected bug with '-bar' which was introduced in the previous
  version.  A closing block brace was being indented.  Thanks to
  Alexandros M Manoussakis for reporting this.</pre>
<pre>
 -New parameter '--entab-leading-whitespace=n', or '-et=n', has been
  added for those who prefer tabs.  This behaves different from the
  existing '-t' parameter; see updated man page.  Suggested by Mark
  Olesen.</pre>
<pre>
 -New parameter '--perl-syntax-check-flags=s'  or '-pcsf=s' can be
  used to change the flags passed to perltidy in a syntax check.
  See updated man page.  Suggested by Mark Olesen.</pre>
<pre>
 -New parameter '--output-path=s'  or '-opath=s' will cause output
  files to be placed in directory s.  See updated man page.  Thanks for
  Mark Olesen for suggesting this.</pre>
<pre>
 -New parameter --dump-profile (or -dpro) will dump to
  standard output information about the search for a
  configuration file, the name of whatever configuration file
  is selected, and its contents.  This should help debugging
  config files, especially on different Windows systems.</pre>
<pre>
 -The -w parameter now notes possible errors of the form:</pre>
<pre>
        $comment = s/^\s*(\S+)\..*/$1/;   # trim whitespace</pre>
<pre>
 -Corrections added for a leading ':' and for leaving a leading 'tcsh'
  line untouched.  Mark Olesen reported that lines of this form were
  accepted by perl but not by perltidy:</pre>
<pre>
        : # use -*- perl -*-
        eval 'exec perl -wS $0 &quot;$@&quot;'  # shell should exec 'perl'
        unless 1;                     # but Perl should skip this one</pre>
<pre>
  Perl will silently swallow a leading colon on line 1 of a
  script, and now perltidy will do likewise.  For example,
  this is a valid script, provided that it is the first line,
  but not otherwise:</pre>
<pre>
        : print &quot;Hello World\n&quot;;
  
  Also, perltidy will now mark a first line with leading ':' followed by
  '#' as type SYSTEM (just as a #!  line), not to be formatted.</pre>
<pre>
 -List formatting improved for certain lists with special
  initial terms, such as occur with 'printf', 'sprintf',
  'push', 'pack', 'join', 'chmod'.  The special initial term is
  now placed on a line by itself.  For example, perltidy -gnu</pre>
<pre>
     OLD:
        $Addr = pack(
                     &quot;C4&quot;,                hex($SourceAddr[0]),
                     hex($SourceAddr[1]), hex($SourceAddr[2]),
                     hex($SourceAddr[3])
                     );</pre>
<pre>
     NEW:
        $Addr = pack(&quot;C4&quot;,
                     hex($SourceAddr[0]), hex($SourceAddr[1]),
                     hex($SourceAddr[2]), hex($SourceAddr[3]));</pre>
<pre>
      OLD:
            push (
                  @{$$self{states}}, '64', '66', '68',
                  '70',              '72', '74', '76',
                  '78',              '80', '82', '84',
                  '86',              '88', '90', '92',
                  '94',              '96', '98', '100',
                  '102',             '104'
                  );</pre>
<pre>
      NEW:
            push (
                  @{$$self{states}},
                  '64', '66', '68', '70', '72',  '74',  '76',
                  '78', '80', '82', '84', '86',  '88',  '90',
                  '92', '94', '96', '98', '100', '102', '104'
                  );</pre>
<pre>
 -Lists of complex items, such as matricies, are now detected
  and displayed with just one item per row:</pre>
<pre>
    OLD:
    $this-&gt;{'CURRENT'}{'gfx'}{'MatrixSkew'} = Text::PDF::API::Matrix-&gt;new(
        [ 1, tan( deg2rad($a) ), 0 ], [ tan( deg2rad($b) ), 1, 0 ],
        [ 0, 0, 1 ]
    );</pre>
<pre>
    NEW:
    $this-&gt;{'CURRENT'}{'gfx'}{'MatrixSkew'} = Text::PDF::API::Matrix-&gt;new(
        [ 1,                  tan( deg2rad($a) ), 0 ],
        [ tan( deg2rad($b) ), 1,                  0 ],
        [ 0,                  0,                  1 ]
    );</pre>
<pre>
 -The perl syntax check will be turned off for now when input is from
  standard input or standard output.  The reason is that this requires
  temporary files, which has produced far too many problems during
  Windows testing.  For example, the POSIX module under Windows XP/2000
  creates temporary names in the root directory, to which only the
  administrator should have permission to write.</pre>
<pre>
 -Merged patch sent by Yves Orton to handle appropriate
  configuration file locations for different Windows varieties
  (2000, NT, Me, XP, 95, 98).</pre>
<pre>
 -Added patch to properly handle a for/foreach loop without
  parens around a list represented as a qw.  I didn't know this
  was possible until Wolfgang Weisselberg pointed it out:</pre>
<pre>
        foreach my $key qw\Uno Due Tres Quadro\ {
            print &quot;Set $key\n&quot;;
        }</pre>
<pre>
  But Perl will give a syntax error without the $ variable; ie this will
  not work:</pre>
<pre>
        foreach qw\Uno Due Tres Quadro\ {
            print &quot;Set $_\n&quot;;
        }</pre>
<pre>
 -Merged Windows version detection code sent by Yves Orton.  Perltidy
  now automatically turns off syntax checking for Win 9x/ME versions,
  and this has solved a lot of robustness problems.  These systems 
  cannot reliably handle backtick operators.  See man page for
  details.
  
 -Merged VMS filename handling patch sent by Michael Cartmell.  (Invalid
  output filenames were being created in some cases).</pre>
<pre>
 -Numerous minor improvements have been made for -lp style indentation.</pre>
<pre>
 -Long C-style 'for' expressions will be broken after each ';'.</pre>
<pre>
  'perltidy -gnu' gives:</pre>
<pre>
    OLD:
    for ($status = $db-&gt;seq($key, $value, R_CURSOR()) ; $status == 0
         and $key eq $origkey ; $status = $db-&gt;seq($key, $value, R_NEXT()))</pre>
<pre>
    NEW:
    for ($status = $db-&gt;seq($key, $value, R_CURSOR()) ;
         $status == 0 and $key eq $origkey ;
         $status = $db-&gt;seq($key, $value, R_NEXT()))</pre>
<pre>
 -For the -lp option, a single long term within parens
  (without commas) now has better alignment.  For example,
  perltidy -gnu</pre>
<pre>
            OLD:
            $self-&gt;throw(&quot;Must specify a known host, not $location,&quot;
                  . &quot; possible values (&quot;
                  . join (&quot;,&quot;, sort keys %hosts) . &quot;)&quot;);</pre>
<pre>
            NEW:
            $self-&gt;throw(&quot;Must specify a known host, not $location,&quot;
                         . &quot; possible values (&quot;
                         . join (&quot;,&quot;, sort keys %hosts) . &quot;)&quot;);</pre>
<p>
</p>
<h2><a name="2001_12_31">2001 12 31</a></h2>
<pre>
 -This version is about 20 percent faster than the previous
  version as a result of optimization work.  The largest gain
  came from switching to a dispatch hash table in the
  tokenizer.</pre>
<pre>
 -perltidy -html will check to see if HTML::Entities is
  installed, and if so, it will use it to encode unsafe
  characters.</pre>
<pre>
 -Added flag -oext=ext to change the output file extension to
  be different from the default ('tdy' or 'html').  For
  example:</pre>
<pre>
    perltidy -html -oext=htm filename</pre>
<pre>
 will produce filename.htm</pre>
<pre>
 -Added flag -cscw to issue warnings if a closing side comment would replace
 an existing, different side comments.  See the man page for details.
 Thanks to Peter Masiar for helpful discussions.</pre>
<pre>
 -Corrected tokenization error of signed hex/octal/binary numbers. For
 example, the first hex number below would have been parsed correctly
 but the second one was not:
    if ( ( $tmp &gt;= 0x80_00_00 ) || ( $tmp &lt; -0x80_00_00 ) ) { }</pre>
<pre>
 -'**=' was incorrectly tokenized as '**' and '='.  This only
     caused a problem with the -extrude opton.</pre>
<pre>
 -Corrected a divide by zero when -extrude option is used</pre>
<pre>
 -The flag -w will now contain all errors reported by 'perl -c' on the
 input file, but otherwise they are not reported.  The reason is that
 perl will report lots of problems and syntax errors which are not of
 interest when only a small snippet is being formatted (such as missing
 modules and unknown bare words).  Perltidy will always report all
 significant syntax errors that it finds, such as unbalanced braces,
 unless the -q (quiet) flag is set.</pre>
<pre>
 -Merged modifications created by Hugh Myers into perltidy.
  These include a 'streamhandle' routine which allows perltidy
  as a module to operate on input and output arrays and strings
  in addition to files.  Documentation and new packaging as a
  module should be ready early next year; This is an elegant,
  powerful update; many thanks to Hugh for contributing it.</pre>
<p>
</p>
<h2><a name="2001_11_28">2001 11 28</a></h2>
<pre>
 -added a tentative patch which tries to keep any existing breakpoints
 at lines with leading keywords map,sort,eval,grep. The idea is to
 improve formatting of sequences of list operations, as in a schwartzian
 transform.  Example:</pre>
<pre>
    INPUT:
    my @sorted = map { $_-&gt;[0] }
                 sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }
                 map { [ $_, rand ] } @list;</pre>
<pre>
    OLD:
    my @sorted =
      map { $_-&gt;[0] } sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] } map { [ $_, rand ] } @list;</pre>
<pre>
    NEW:
    my @sorted = map { $_-&gt;[0] }
      sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }
      map { [ $_, rand ] } @list;</pre>
<pre>
  The new alignment is not as nice as the input, but this is an improvement.
  Thanks to Yves Orton for this suggestion.</pre>
<pre>
 -modified indentation logic so that a line with leading opening paren,
 brace, or square bracket will never have less indentation than the
 line with the corresponding opening token.  Here's a simple example:</pre>
<pre>
    OLD:
        $mw-&gt;Button(
            -text    =&gt; &quot;New Document&quot;,
            -command =&gt; \&amp;new_document
          )-&gt;pack(
            -side   =&gt; 'bottom',
            -anchor =&gt; 'e'
        );</pre>
<pre>
    Note how the closing ');' is lined up with the first line, even
    though it closes a paren in the 'pack' line.  That seems wrong.
 
    NEW:
        $mw-&gt;Button(
            -text    =&gt; &quot;New Document&quot;,
            -command =&gt; \&amp;new_document
          )-&gt;pack(
            -side   =&gt; 'bottom',
            -anchor =&gt; 'e'
          );</pre>
<pre>
   This seems nicer: you can up-arrow with an editor and arrive at the
   opening 'pack' line.
 
 -corrected minor glitch in which cuddled else (-ce) did not get applied
 to an 'unless' block, which should look like this:</pre>
<pre>
        unless ($test) {</pre>
<pre>
        } else {</pre>
<pre>
        }</pre>
<pre>
  Thanks to Jeremy Mates for reporting this.</pre>
<pre>
 -The man page has been reorganized to parameters easier to find.
 
 -Added check for multiple definitions of same subroutine.  It is easy
  to introduce this problem when cutting and pasting. Perl does not
  complain about it, but it can lead to disaster.</pre>
<pre>
 -The command -pro=filename  or -profile=filename may be used to specify a
  configuration file which will override the default name of .perltidyrc.
  There must not be a space on either side of the '=' sign.  I needed
  this to be able to easily test perltidy with a variety of different
  configuration files.</pre>
<pre>
 -Side comment alignment has been improved somewhat across frequent level
  changes, as in short if/else blocks.  Thanks to Wolfgang Weisselberg 
  for pointing out this problem.  For example:
    
    OLD:
    if ( ref $self ) {    # Called as a method
        $format = shift;
    }
    else {    # Regular procedure call
        $format = $self;
        undef $self;
    }</pre>
<pre>
    NEW:
    if ( ref $self ) {    # Called as a method
        $format = shift;
    }
    else {                # Regular procedure call
        $format = $self;
        undef $self;
    }</pre>
<pre>
 -New command -ssc (--static-side-comment) and related command allows
  side comments to be spaced close to preceding character.  This is
  useful for displaying commented code as side comments.</pre>
<pre>
 -New command -csc (--closing-side-comment) and several related
  commands allow comments to be added to (and deleted from) any or all
  closing block braces.  This can be useful if you have to maintain large
  programs, especially those that you didn't write.  See updated man page.
  Thanks to Peter Masiar for this suggestion.  For a simple example:</pre>
<pre>
        perltidy -csc</pre>
<pre>
        sub foo {
            if ( !defined( $_[0] ) ) {
                print(&quot;Hello, World\n&quot;);
            }
            else {
                print( $_[0], &quot;\n&quot; );
            }
        } ## end sub foo</pre>
<pre>
  This added '## end sub foo' to the closing brace.  
  To remove it, perltidy -ncsc.</pre>
<pre>
 -New commands -ola, for outdenting labels, and -okw, for outdenting
  selected control keywords, were implemented.  See the perltidy man
  page for details.  Thanks to Peter Masiar for this suggestion.</pre>
<pre>
 -Hanging side comment change: a comment will not be considered to be a
  hanging side comment if there is no leading whitespace on the line.
  This should improve the reliability of identifying hanging side comments.
  Thanks to Peter Masiar for this suggestion.</pre>
<pre>
 -Two new commands for outdenting, -olq (outdent-long-quotes) and -olc
  (outdent-long-comments), have been added.  The original -oll
  (outdent-long-lines) remains, and now is an abbreviation for -olq and -olc.
  The new default is just -olq.  This was necessary to avoid inconsistency with
  the new static block comment option.</pre>
<pre>
 -Static block comments:  to provide a way to display commented code
  better, the convention is used that comments with a leading '##' should
  not be formatted as usual.  Please see '-sbc' (or '--static-block-comment')
  for documentation.  It can be deactivated with with -nsbc, but
  should not normally be necessary. Thanks to Peter Masiar for this 
  suggestion.</pre>
<pre>
 -Two changes were made to help show structure of complex lists:
  (1) breakpoints are forced after every ',' in a list where any of
  the list items spans multiple lines, and
  (2) List items which span multiple lines now get continuation indentation.</pre>
<pre>
  The following example illustrates both of these points.  Many thanks to
  Wolfgang Weisselberg for this snippet and a discussion of it; this is a
  significant formatting improvement. Note how it is easier to see the call
  parameters in the NEW version:</pre>
<pre>
    OLD:
    assert( __LINE__, ( not defined $check )
        or ref $check
        or $check eq &quot;new&quot;
        or $check eq &quot;old&quot;, &quot;Error in parameters&quot;,
        defined $old_new ? ( ref $old_new ? ref $old_new : $old_new ) : &quot;undef&quot;,
        defined $db_new  ? ( ref $db_new  ? ref $db_new  : $db_new )  : &quot;undef&quot;,
        defined $old_db ? ( ref $old_db ? ref $old_db : $old_db ) : &quot;undef&quot; );</pre>
<pre>
    NEW: 
    assert(
        __LINE__,
        ( not defined $check )
          or ref $check
          or $check eq &quot;new&quot;
          or $check eq &quot;old&quot;,
        &quot;Error in parameters&quot;,
        defined $old_new ? ( ref $old_new ? ref $old_new : $old_new ) : &quot;undef&quot;,
        defined $db_new  ? ( ref $db_new  ? ref $db_new  : $db_new )  : &quot;undef&quot;,
        defined $old_db  ? ( ref $old_db  ? ref $old_db  : $old_db )  : &quot;undef&quot;
    );</pre>
<pre>
    Another example shows how this helps displaying lists:</pre>
<pre>
    OLD:
    %{ $self-&gt;{COMPONENTS} } = (
        fname =&gt;
        { type =&gt; 'name', adj =&gt; 'yes', font =&gt; 'Helvetica', 'index' =&gt; 0 },
        street =&gt;
        { type =&gt; 'road', adj =&gt; 'yes', font =&gt; 'Helvetica', 'index' =&gt; 2 },
    );</pre>
<pre>
    The structure is clearer with the added indentation:
    
    NEW:
    %{ $self-&gt;{COMPONENTS} } = (
        fname =&gt;
          { type =&gt; 'name', adj =&gt; 'yes', font =&gt; 'Helvetica', 'index' =&gt; 0 },
        street =&gt;
          { type =&gt; 'road', adj =&gt; 'yes', font =&gt; 'Helvetica', 'index' =&gt; 2 },
    );</pre>
<pre>
    -The structure of nested logical expressions is now displayed better.
    Thanks to Wolfgang Weisselberg for helpful discussions.  For example,
    note how the status of the final 'or' is displayed in the following:</pre>
<pre>
    OLD:
    return ( !null($op)
          and null( $op-&gt;sibling )
          and $op-&gt;ppaddr eq &quot;pp_null&quot;
          and class($op) eq &quot;UNOP&quot;
          and ( ( $op-&gt;first-&gt;ppaddr =~ /^pp_(and|or)$/
            and $op-&gt;first-&gt;first-&gt;sibling-&gt;ppaddr eq &quot;pp_lineseq&quot; )
            or ( $op-&gt;first-&gt;ppaddr eq &quot;pp_lineseq&quot;
                and not null $op-&gt;first-&gt;first-&gt;sibling
                and $op-&gt;first-&gt;first-&gt;sibling-&gt;ppaddr eq &quot;pp_unstack&quot; ) ) );</pre>
<pre>
    NEW:
    return (
        !null($op)
          and null( $op-&gt;sibling )
          and $op-&gt;ppaddr eq &quot;pp_null&quot;
          and class($op) eq &quot;UNOP&quot;
          and (
            (
                $op-&gt;first-&gt;ppaddr =~ /^pp_(and|or)$/
                and $op-&gt;first-&gt;first-&gt;sibling-&gt;ppaddr eq &quot;pp_lineseq&quot;
            )
            or ( $op-&gt;first-&gt;ppaddr eq &quot;pp_lineseq&quot;
                and not null $op-&gt;first-&gt;first-&gt;sibling
                and $op-&gt;first-&gt;first-&gt;sibling-&gt;ppaddr eq &quot;pp_unstack&quot; )
          )
    );</pre>
<pre>
   -A break will always be put before a list item containing a comma-arrow.
   This will improve formatting of mixed lists of this form:</pre>
<pre>
        OLD:
        $c-&gt;create(
            'text', 225, 20, -text =&gt; 'A Simple Plot',
            -font =&gt; $font,
            -fill =&gt; 'brown'
        );</pre>
<pre>
        NEW:
        $c-&gt;create(
            'text', 225, 20,
            -text =&gt; 'A Simple Plot',
            -font =&gt; $font,
            -fill =&gt; 'brown'
        );</pre>
<pre>
  -For convenience, the command -dac (--delete-all-comments) now also
  deletes pod.  Likewise, -tac (--tee-all-comments) now also sends pod
  to a '.TEE' file.  Complete control over the treatment of pod and
  comments is still possible, as described in the updated help message 
  and man page.</pre>
<pre>
  -The logic which breaks open 'containers' has been rewritten to be completely
  symmetric in the following sense: if a line break is placed after an opening
  {, [, or (, then a break will be placed before the corresponding closing
  token.  Thus, a container either remains closed or is completely cracked
  open.</pre>
<pre>
  -Improved indentation of parenthesized lists.  For example,</pre>
<pre>
            OLD:
            $GPSCompCourse =
              int(
              atan2( $GPSTempCompLong - $GPSLongitude,
              $GPSLatitude - $GPSTempCompLat ) * 180 / 3.14159265 );</pre>
<pre>
            NEW:
            $GPSCompCourse = int(
                atan2(
                    $GPSTempCompLong - $GPSLongitude,
                    $GPSLatitude - $GPSTempCompLat
                  ) * 180 / 3.14159265
            );</pre>
<pre>
   Further improvements will be made in future releases.</pre>
<pre>
  -Some improvements were made in formatting small lists.</pre>
<pre>
  -Correspondence between Input and Output line numbers reported in a 
   .LOG file should now be exact.  They were sometimes off due to the size
   of intermediate buffers.</pre>
<pre>
  -Corrected minor tokenization error in which a ';' in a foreach loop
   control was tokenized as a statement termination, which forced a 
   line break:</pre>
<pre>
        OLD:
        foreach ( $i = 0;
            $i &lt;= 10;
            $i += 2
          )
        {
            print &quot;$i &quot;;
        }</pre>
<pre>
        NEW:
        foreach ( $i = 0 ; $i &lt;= 10 ; $i += 2 ) {
            print &quot;$i &quot;;
        }</pre>
<pre>
  -Corrected a problem with reading config files, in which quote marks were not
   stripped.  As a result, something like -wba=&quot;&amp;&amp; . || &quot; would have the leading
   quote attached to the &amp;&amp; and not work correctly.  A workaround for older
   versions is to place a space around all tokens within the quotes, like this:
   -wba=&quot; &amp;&amp; . || &quot;</pre>
<pre>
  -Removed any existing space between a label and its ':'
    OLD    : { }
    NEW: { }
   This was necessary because the label and its colon are a single token.</pre>
<pre>
  -Corrected tokenization error for the following (highly non-recommended) 
   construct:
    $user = @vars[1] / 100;
 
  -Resolved cause of a difference between perltidy under perl v5.6.1 and
  5.005_03; the problem was different behavior of \G regex position
  marker(!)</pre>
<p>
</p>
<h2><a name="2001_10_20">2001 10 20</a></h2>
<pre>

 -Corrected a bug in which a break was not being made after a full-line
 comment within a short eval/sort/map/grep block.  A flag was not being
 zeroed.  The syntax error check catches this.  Here is a snippet which
 illustrates the bug:</pre>
<pre>
        eval {
            #open Socket to Dispatcher
            $sock = &amp;OpenSocket;
        };</pre>
<pre>
 The formatter mistakenly thought that it had found the following 
 one-line block:
 
        eval {#open Socket to Dispatcher$sock = &amp;OpenSocket; };</pre>
<pre>
 The patch fixes this. Many thanks to Henry Story for reporting this bug.</pre>
<pre>
 -Changes were made to help diagnose and resolve problems in a
 .perltidyrc file: 
   (1) processing of command parameters has been into two separate
   batches so that any errors in a .perltidyrc file can be localized.  
   (2) commands --help, --version, and as many of the --dump-xxx
   commands are handled immediately, without any command line processing
   at all.  
   (3) Perltidy will ignore any commands in the .perltidyrc file which
   cause immediate exit.  These are:  -h -v -ddf -dln -dop -dsn -dtt
   -dwls -dwrs -ss.  Thanks to Wolfgang Weisselberg for helpful
   suggestions regarding these updates.</pre>
<pre>
 -Syntax check has been reinstated as default for MSWin32 systems.  This
 way Windows 2000 users will get syntax check by default, which seems
 like a better idea, since the number of Win 95/98 systems will be
 decreasing over time.  Documentation revised to warn Windows 95/98
 users about the problem with empty '&amp;1'.  Too bad these systems
 all report themselves as MSWin32.</pre>
<p>
</p>
<h2><a name="2001_10_16">2001 10 16</a></h2>
<pre>
 -Fixed tokenization error in which a method call of the form</pre>
<pre>
    Module::-&gt;new();
 
  got a space before the '::' like this:</pre>
<pre>
    Module ::-&gt;new();</pre>
<pre>
  Thanks to David Holden for reporting this.
 
 -Added -html control over pod text, using a new abbreviation 'pd'.  See
 updated perl2web man page. The default is to use the color of a comment,
 but italicized.  Old .css style sheets will need a new line for
 .pd to use this.  The old color was the color of a string, and there
 was no control.  
 
 -.css lines are now printed in sorted order.</pre>
<pre>
 -Fixed interpolation problem where html files had '$input_file' as title
 instead of actual input file name.  Thanks to Simon Perreault for finding
 this and sending a patch, and also to Tobias Weber.</pre>
<pre>
 -Breaks will now have the ':' placed at the start of a line, 
 one per line by default because this shows logical structure
 more clearly. This coding has been completely redone. Some 
 examples of new ?/: formatting:</pre>
<pre>
       OLD:
            wantarray ? map( $dir::cwd-&gt;lookup($_)-&gt;path, @_ ) :
              $dir::cwd-&gt;lookup( $_[0] )-&gt;path;</pre>
<pre>
       NEW:
            wantarray 
              ? map( $dir::cwd-&gt;lookup($_)-&gt;path, @_ )
              : $dir::cwd-&gt;lookup( $_[0] )-&gt;path;</pre>
<pre>
       OLD:
                $a = ( $b &gt; 0 ) ? {
                    a =&gt; 1,
                    b =&gt; 2
                } : { a =&gt; 6, b =&gt; 8 };</pre>
<pre>
       NEW:
                $a = ( $b &gt; 0 )
                  ? {
                    a =&gt; 1,
                    b =&gt; 2
                  }
                  : { a =&gt; 6, b =&gt; 8 };</pre>
<pre>
    OLD: (-gnu):
    $self-&gt;note($self-&gt;{skip} ? &quot;Hunk #$self-&gt;{hunk} ignored at 1.\n&quot; :
                &quot;Hunk #$self-&gt;{hunk} failed--$@&quot;);</pre>
<pre>
    NEW: (-gnu):
    $self-&gt;note($self-&gt;{skip} 
                ? &quot;Hunk #$self-&gt;{hunk} ignored at 1.\n&quot;
                : &quot;Hunk #$self-&gt;{hunk} failed--$@&quot;);</pre>
<pre>
    OLD:
        $which_search =
          $opts{&quot;t&quot;} ? 'title'   :
          $opts{&quot;s&quot;} ? 'subject' : $opts{&quot;a&quot;} ? 'author' : 'title';</pre>
<pre>
    NEW:
        $which_search =
          $opts{&quot;t&quot;} ? 'title'
          : $opts{&quot;s&quot;} ? 'subject'
          : $opts{&quot;a&quot;} ? 'author'
          : 'title';
 
 You can use -wba=':' to recover the previous default which placed ':'
 at the end of a line.  Thanks to Michael Cartmell for helpful
 discussions and examples.</pre>
<pre>
 -Tokenizer updated to do syntax checking for matched ?/: pairs.  Also,
 the tokenizer now outputs a unique serial number for every balanced
 pair of brace types and ?/: pairs.  This greatly simplifies the
 formatter.</pre>
<pre>
 -Long lines with repeated 'and', 'or', '&amp;&amp;', '||'  will now have
 one such item per line.  For example:</pre>
<pre>
    OLD:
        if ( $opt_d || $opt_m || $opt_p || $opt_t || $opt_x
            || ( -e $archive &amp;&amp; $opt_r ) )
        {
            ( $pAr, $pNames ) = readAr($archive);
        }</pre>
<pre>
    NEW:
        if ( $opt_d
            || $opt_m
            || $opt_p
            || $opt_t
            || $opt_x
            || ( -e $archive &amp;&amp; $opt_r ) )
        {
            ( $pAr, $pNames ) = readAr($archive);
        }</pre>
<pre>
   OLD:
        if ( $vp-&gt;{X0} + 4 &lt;= $x &amp;&amp; $vp-&gt;{X0} + $vp-&gt;{W} - 4 &gt;= $x
            &amp;&amp; $vp-&gt;{Y0} + 4 &lt;= $y &amp;&amp; $vp-&gt;{Y0} + $vp-&gt;{H} - 4 &gt;= $y )</pre>
<pre>
   NEW:
        if ( $vp-&gt;{X0} + 4 &lt;= $x
            &amp;&amp; $vp-&gt;{X0} + $vp-&gt;{W} - 4 &gt;= $x
            &amp;&amp; $vp-&gt;{Y0} + 4 &lt;= $y
            &amp;&amp; $vp-&gt;{Y0} + $vp-&gt;{H} - 4 &gt;= $y )</pre>
<pre>
 -Long lines with multiple concatenated tokens will have concatenated
 terms (see below) placed one per line, except for short items.  For
 example:</pre>
<pre>
   OLD:
        $report .=
          &quot;Device type:&quot; . $ib-&gt;family . &quot;  ID:&quot; . $ib-&gt;serial . &quot;  CRC:&quot;
          . $ib-&gt;crc . &quot;: &quot; . $ib-&gt;model() . &quot;\n&quot;;</pre>
<pre>
   NEW:
        $report .= &quot;Device type:&quot;
          . $ib-&gt;family . &quot;  ID:&quot;
          . $ib-&gt;serial . &quot;  CRC:&quot;
          . $ib-&gt;model()
          . $ib-&gt;crc . &quot;: &quot; . &quot;\n&quot;;</pre>
<pre>
 NOTE: at present 'short' means 8 characters or less.  There is a
 tentative flag to change this (-scl), but it is undocumented and
 is likely to be changed or removed later, so only use it for testing.  
 In the above example, the tokens &quot;  ID:&quot;, &quot;  CRC:&quot;, and &quot;\n&quot; are below
 this limit.</pre>
<pre>
 -If a line which is short enough to fit on a single line was
 nevertheless broken in the input file at a 'good' location (see below), 
 perltidy will try to retain a break.  For example, the following line
 will be formatted as:
 
    open SUM, &quot;&lt;$file&quot;
      or die &quot;Cannot open $file ($!)&quot;;
 
 if it was broken in the input file, and like this if not:</pre>
<pre>
    open SUM, &quot;&lt;$file&quot; or die &quot;Cannot open $file ($!)&quot;;</pre>
<pre>
 GOOD: 'good' location means before 'and','or','if','unless','&amp;&amp;','||'</pre>
<pre>
 The reason perltidy does not just always break at these points is that if
 there are multiple, similar statements, this would preclude alignment.  So
 rather than check for this, perltidy just tries to follow the input style,
 in the hopes that the author made a good choice. Here is an example where 
 we might not want to break before each 'if':</pre>
<pre>
    ($Locale, @Locale) = ($English, @English) if (@English &gt; @Locale);
    ($Locale, @Locale) = ($German,  @German)  if (@German &gt; @Locale);
    ($Locale, @Locale) = ($French,  @French)  if (@French &gt; @Locale);
    ($Locale, @Locale) = ($Spanish, @Spanish) if (@Spanish &gt; @Locale);</pre>
<pre>
 -Added wildcard file expansion for systems with shells which lack this.
 Now 'perltidy *.pl' should work under MSDOS/Windows.  Thanks to Hugh Myers 
 for suggesting this.  This uses builtin glob() for now; I may change that.</pre>
<pre>
 -Added new flag -sbl which, if specified, overrides the value of -bl
 for opening sub braces.  This allows formatting of this type:</pre>
<pre>
 perltidy -sbl</pre>
<pre>
 sub foo
 {
    if (!defined($_[0])) {
        print(&quot;Hello, World\n&quot;);
    }
    else {
        print($_[0], &quot;\n&quot;);
    }
 }
 Requested by Don Alexander.</pre>
<pre>
 -Fixed minor parsing error which prevented a space after a $$ variable
 (pid) in some cases.  Thanks to Michael Cartmell for noting this.
 For example, 
   old: $$&lt; 700 
   new: $$ &lt; 700</pre>
<pre>
 -Improved line break choices 'and' and 'or' to display logic better.
 For example:</pre>
<pre>
    OLD:
        exists $self-&gt;{'build_dir'} and push @e,
          &quot;Unwrapped into directory $self-&gt;{'build_dir'}&quot;;</pre>
<pre>
    NEW:
        exists $self-&gt;{'build_dir'}
          and push @e, &quot;Unwrapped into directory $self-&gt;{'build_dir'}&quot;;</pre>
<pre>
 -Fixed error of multiple use of abbreviatioin '-dsc'.  -dsc remains 
 abbreviation for delete-side-comments; -dsm is new abbreviation for 
 delete-semicolons.</pre>
<pre>
 -Corrected and updated 'usage' help routine.  Thanks to Slaven Rezic for 
 noting an error.</pre>
<pre>
 -The default for Windows is, for now, not to do a 'perl -c' syntax
 check (but -syn will activate it).  This is because of problems with
 command.com.  James Freeman sent me a patch which tries to get around
 the problems, and it works in many cases, but testing revealed several
 issues that still need to be resolved.  So for now, the default is no
 syntax check for Windows.</pre>
<pre>
 -I added a -T flag when doing perl -c syntax check.
 This is because I test it on a large number of scripts from sources
 unknown, and who knows what might be hidden in initialization blocks?
 Also, deactivated the syntax check if perltidy is run as root.  As a
 benign example, running the previous version of perltidy on the
 following file would cause it to disappear:</pre>
<pre>
        BEGIN{
                print &quot;Bye, bye baby!\n&quot;;
                unlink $0;
        }
        
 The new version will not let that happen.</pre>
<pre>
 -I am contemplating (but have not yet implemented) making '-lp' the
 default indentation, because it is stable now and may be closer to how
 perl is commonly formatted.  This could be in the next release.  The
 reason that '-lp' was not the original default is that the coding for
 it was complex and not ready for the initial release of perltidy.  If
 anyone has any strong feelings about this, I'd like to hear.  The
 current default could always be recovered with the '-nlp' flag.</pre>
<p>
</p>
<h2><a name="2001_09_03">2001 09 03</a></h2>
<pre>
 -html updates:
     - sub definition names are now specially colored, red by default.  
       The letter 'm' is used to identify them.
     - keyword 'sub' now has color of other keywords.
     - restored html keyword color to __END__ and __DATA__, which was 
       accidentally removed in the previous version.</pre>
<pre>
 -A new -se (--standard-error-output) flag has been implemented and
 documented which causes all errors to be written to standard output
 instead of a .ERR file.</pre>
<pre>
 -A new -w (--warning-output) flag has been implemented and documented
  which causes perltidy to output certain non-critical messages to the
  error output file, .ERR.  These include complaints about pod usage,
  for example.  The default is to not include these.</pre>
<pre>
  NOTE: This replaces an undocumented -w=0 or --warning-level flag
  which was tentatively introduced in the previous version to avoid some
  unwanted messages.  The new default is the same as the old -w=0, so
  that is no longer needed.</pre>
<pre>
  -Improved syntax checking and corrected tokenization of functions such
  as rand, srand, sqrt, ...  These can accept either an operator or a term
  to their right.  This has been corrected.
 
 -Corrected tokenization of semicolon: testing of the previous update showed 
 that the semicolon in the following statement was being mis-tokenized.  That
 did no harm, other than adding an extra blank space, but has been corrected.</pre>
<pre>
          for (sort {strcoll($a,$b);} keys %investments) {
             ...
          }</pre>
<pre>
 -New syntax check: after wasting 5 minutes trying to resolve a syntax
  error in which I had an extra terminal ';' in a complex for (;;) statement, 
  I spent a few more minutes adding a check for this in perltidy so it won't
  happen again.</pre>
<pre>
 -The behavior of --break-before-subs (-bbs) and --break-before-blocks
 (-bbb) has been modified.  Also, a new control parameter,
 --long-block-line-count=n (-lbl=n) has been introduced to give more
 control on -bbb.  This was previously a hardwired value.  The reason
 for the change is to reduce the number of unwanted blank lines that
 perltidy introduces, and make it less erratic.  It's annoying to remove
 an unwanted blank line and have perltidy put it back.  The goal is to
 be able to sprinkle a few blank lines in that dense script you
 inherited from Bubba.  I did a lot of experimenting with different
 schemes for introducing blank lines before and after code blocks, and
 decided that there is no really good way to do it.  But I think the new
 scheme is an improvement.  You can always deactivate this with -nbbb.
 I've been meaning to work on this; thanks to Erik Thaysen for bringing
 it to my attention.</pre>
<pre>
 -The .LOG file is seldom needed, and I get tired of deleting them, so
  they will now only be automatically saved if perltidy thinks that it
  made an error, which is almost never.  You can still force the logfile
  to be saved with -log or -g.</pre>
<pre>
 -Improved method for computing number of columns in a table.  The old
 method always tried for an even number.  The new method allows odd
 numbers when it is obvious that a list is not a hash initialization
 list.</pre>
<pre>
   old: my (
             $name,       $xsargs, $parobjs, $optypes,
             $hasp2child, $pmcode, $hdrcode, $inplacecode,
             $globalnew,  $callcopy
          )
          = @_;</pre>
<pre>
   new: my (
             $name,   $xsargs,  $parobjs,     $optypes,   $hasp2child,
             $pmcode, $hdrcode, $inplacecode, $globalnew, $callcopy
          )
          = @_;</pre>
<pre>
 -I fiddled with the list threshold adjustment, and some small lists
 look better now.  Here is the change for one of the lists in test file
 'sparse.t':
 old:
   %units =
     (&quot;in&quot;, &quot;in&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pc&quot;, &quot;pi&quot;, &quot;mm&quot;, &quot;mm&quot;, &quot;cm&quot;, &quot;cm&quot;, &quot;\\hsize&quot;, &quot;%&quot;,
       &quot;\\vsize&quot;, &quot;%&quot;, &quot;\\textwidth&quot;, &quot;%&quot;, &quot;\\textheight&quot;, &quot;%&quot;);</pre>
<pre>
 new:
   %units = (
              &quot;in&quot;,      &quot;in&quot;, &quot;pt&quot;,          &quot;pt&quot;, &quot;pc&quot;,           &quot;pi&quot;,
              &quot;mm&quot;,      &quot;mm&quot;, &quot;cm&quot;,          &quot;cm&quot;, &quot;\\hsize&quot;,      &quot;%&quot;,
              &quot;\\vsize&quot;, &quot;%&quot;,  &quot;\\textwidth&quot;, &quot;%&quot;,  &quot;\\textheight&quot;, &quot;%&quot;
              );</pre>
<pre>
 -Improved -lp formatting at '=' sign.  A break was always being added after
 the '=' sign in a statement such as this, (to be sure there was enough room
 for the parameters):</pre>
<pre>
 old: my $fee =
        CalcReserveFee(
                        $env,          $borrnum,
                        $biblionumber, $constraint,
                        $bibitems
                        );
 
 The updated version doesn't do this unless the space is really needed:</pre>
<pre>
 new: my $fee = CalcReserveFee(
                               $env,          $borrnum,
                               $biblionumber, $constraint,
                               $bibitems
                               );</pre>
<pre>
 -I updated the tokenizer to allow $#+ and $#-, which seem to be new to
 Perl 5.6.  Some experimenting with a recent version of Perl indicated
 that it allows these non-alphanumeric '$#' array maximum index
 varaibles: $#: $#- $#+ so I updated the parser accordingly.  Only $#:
 seems to be valid in older versions of Perl.</pre>
<pre>
 -Fixed a rare formatting problem with -lp (and -gnu) which caused
 excessive indentation.</pre>
<pre>
 -Many additional syntax checks have been added.</pre>
<pre>
 -Revised method for testing here-doc target strings; the following
 was causing trouble with a regex test because of the '*' characters:
  print &lt;&lt;&quot;*EOF*&quot;;
  bla bla
  *EOF*
 Perl seems to allow almost anything to be a here doc target, so an
 exact string comparison is now used.</pre>
<pre>
 -Made update to allow underscores in binary numbers, like '0b1100_0000'.</pre>
<pre>
 -Corrected problem with scanning certain module names; a blank space was 
 being inserted after 'warnings' in the following:
    use warnings::register;
 The problem was that warnings (and a couple of other key modules) were 
 being tokenized as keywords.  They should have just been identifiers.</pre>
<pre>
 -Corrected tokenization of indirect objects after sort, system, and exec,
 after testing produced an incorrect error message for the following
 line of code:
    print sort $sortsubref @list;</pre>
<pre>
 -Corrected minor problem where a line after a format had unwanted
 extra continuation indentation.</pre>
<pre>
 -Delete-block-comments (and -dac) now retain any leading hash-bang line</pre>
<pre>
 -Update for -lp (and -gnu) to not align the leading '=' of a list
 with a previous '=', since this interferes with alignment of parameters.</pre>
<pre>
  old:  my $hireDay = new Date;
        my $self    = {
                     firstName =&gt; undef,
                     lastName  =&gt; undef,
                     hireDay   =&gt; $hireDay
                     };
    
  new:  my $hireDay = new Date;
        my $self = {
                     firstName =&gt; undef,
                     lastName  =&gt; undef,
                     hireDay   =&gt; $hireDay
                     };</pre>
<pre>
 -Modifications made to display tables more compactly when possible,
  without adding lines. For example,
  old:
                '1', &quot;I&quot;, '2', &quot;II&quot;, '3', &quot;III&quot;, '4', &quot;IV&quot;,
                '5', &quot;V&quot;, '6', &quot;VI&quot;, '7', &quot;VII&quot;, '8', &quot;VIII&quot;,
                '9', &quot;IX&quot;
  new:
                '1', &quot;I&quot;,   '2', &quot;II&quot;,   '3', &quot;III&quot;,
                '4', &quot;IV&quot;,  '5', &quot;V&quot;,    '6', &quot;VI&quot;,
                '7', &quot;VII&quot;, '8', &quot;VIII&quot;, '9', &quot;IX&quot;</pre>
<pre>
 -Corrected minor bug in which -pt=2 did not keep the right paren tight
 around a '++' or '--' token, like this:</pre>
<pre>
            for ($i = 0 ; $i &lt; length $key ; $i++ )</pre>
<pre>
 The formatting for this should be, and now is:</pre>
<pre>
            for ($i = 0 ; $i &lt; length $key ; $i++)</pre>
<pre>
 Thanks to Erik Thaysen for noting this.</pre>
<pre>
 -Discovered a new bug involving here-docs during testing!  See BUGS.html.</pre>
<pre>
 -Finally fixed parsing of subroutine attributes (A Perl 5.6 feature).
 However, the attributes and prototypes must still be on the same line
 as the sub name.</pre>
<p>
</p>
<h2><a name="2001_07_31">2001 07 31</a></h2>
<pre>
 -Corrected minor, uncommon bug found during routine testing, in which a
 blank got inserted between a function name and its opening paren after
 a file test operator, but only in the case that the function had not
 been previously seen.  Perl uses the existance (or lack thereof) of 
 the blank to guess if it is a function call.  That is,
    if (-l pid_filename()) {
 became
    if (-l pid_filename ()) {
 which is a syntax error if pid_filename has not been seen by perl.</pre>
<pre>
 -If the AutoLoader module is used, perltidy will continue formatting
 code after seeing an __END__ line.  Use -nlal to deactivate this feature.  
 Likewise, if the SelfLoader module is used, perltidy will continue 
 formatting code after seeing a __DATA__ line.  Use -nlsl to
 deactivate this feature.  Thanks to Slaven Rezic for this suggestion.</pre>
<pre>
 -pod text after __END__ and __DATA__ is now identified by perltidy
 so that -dp works correctly.  Thanks to Slaven Rezic for this suggestion.</pre>
<pre>
 -The first $VERSION line which might be eval'd by MakeMaker
 is now passed through unchanged.  Use -npvl to deactivate this feature.
 Thanks to Manfred Winter for this suggestion.</pre>
<pre>
 -Improved indentation of nested parenthesized expressions.  Tests have
 given favorable results.  Thanks to Wolfgang Weisselberg for helpful
 examples.</pre>
<p>
</p>
<h2><a name="2001_07_23">2001 07 23</a></h2>
<pre>

 -Fixed a very rare problem in which an unwanted semicolon was inserted
 due to misidentification of anonymous hash reference curly as a code
 block curly.  (No instances of this have been reported; I discovered it
 during testing).  A workaround for older versions of perltidy is to use
 -nasc.</pre>
<pre>
 -Added -icb (-indent-closing-brace) parameter to indent a brace which
 terminates a code block to the same level as the previous line.
 Suggested by Andrew Cutler.  For example,</pre>
<pre>
        if ($task) {
            yyy();
            }    # -icb
        else {
            zzz();
            }</pre>
<pre>
 -Rewrote error message triggered by an unknown bareword in a print or
 printf filehandle position, and added flag -w=0 to prevent issuing this
 error message.  Suggested by Byron Jones.</pre>
<pre>
 -Added modification to align a one-line 'if' block with similar
 following 'elsif' one-line blocks, like this:
      if    ( $something eq &quot;simple&quot; )  { &amp;handle_simple }
      elsif ( $something eq &quot;hard&quot; )    { &amp;handle_hard }
 (Suggested by  Wolfgang Weisselberg).</pre>
<p>
</p>
<h2><a name="2001_07_02">2001 07 02</a></h2>
<pre>
 -Eliminated all constants with leading underscores because perl 5.005_03
 does not support that.  For example, _SPACES changed to XX_SPACES.
 Thanks to kromJx for this update.</pre>
<p>
</p>
<h2><a name="2001_07_01">2001 07 01</a></h2>
<pre>
 -the directory of test files has been moved to a separate distribution
 file because it is getting large but is of little interest to most users.
 For the current distribution:
   perltidy-20010701.tgz        contains the source and docs for perltidy
   perltidy-20010701-test.tgz   contains the test files</pre>
<pre>
 -fixed bug where temporary file perltidy.TMPI was not being deleted 
 when input was from stdin.</pre>
<pre>
 -adjusted line break logic to not break after closing brace of an
 eval block (suggested by Boris Zentner).</pre>
<pre>
 -added flag -gnu (--gnu-style) to give an approximation to the GNU
 style as sometimes applied to perl.  The programming style in GNU
 'automake' was used as a guide in setting the parameters; these
 parameters will probably be adjusted over time.</pre>
<pre>
 -an empty code block now has one space for emphasis:
   if ( $cmd eq &quot;bg_untested&quot; ) {}    # old
   if ( $cmd eq &quot;bg_untested&quot; ) { }   # new
 If this bothers anyone, we could create a parameter.</pre>
<pre>
 -the -bt (--brace-tightness) parameter has been split into two
 parameters to give more control. -bt now applies only to non-BLOCK
 braces, while a new parameter -bbt (block-brace-tightness) applies to
 curly braces which contain code BLOCKS. The default value is -bbt=0.</pre>
<pre>
 -added flag -icp (--indent-closing-paren) which leaves a statment
 termination of the form );, };, or ]; indented with the same
 indentation as the previous line.  For example,</pre>
<pre>
    @month_of_year = (          # default, or -nicp
        'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct',
        'Nov', 'Dec'
    );</pre>
<pre>
    @month_of_year = (          # -icp
        'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct',
        'Nov', 'Dec'
        );</pre>
<pre>
 -Vertical alignment updated to synchronize with tokens &amp;&amp;, ||,
 and, or, if, unless.  Allowable space before forcing
 resynchronization has been increased.  (Suggested by  Wolfgang
 Weisselberg).</pre>
<pre>
 -html corrected to use -nohtml-bold-xxxxxxx or -nhbx to negate bold,
 and likewise -nohtml-italic-xxxxxxx or -nhbi to negate italic.  There
 was no way to negate these previously.  html documentation updated and
 corrected.  (Suggested by  Wolfgang Weisselberg).</pre>
<pre>
 -Some modifications have been made which improve the -lp formatting in
 a few cases.</pre>
<pre>
 -Perltidy now retains or creates a blank line after an =cut to keep
 podchecker happy (Suggested by Manfred H. Winter).  This appears to be
 a glitch in podchecker, but it was annoying.</pre>
<p>
</p>
<h2><a name="2001_06_17">2001 06 17</a></h2>
<pre>
 -Added -bli flag to give continuation indentation to braces, like this</pre>
<pre>
        if ($bli_flag)
          {
            extra_indentation();
          }</pre>
<pre>
 -Corrected an error with the tab (-t) option which caused the last line
 of a multi-line quote to receive a leading tab.  This error was in
 version 2001 06 08  but not 2001 04 06.  If you formatted a script
 with -t with this version, please check it by running once with the
 -chk flag and perltidy will scan for this possible error.</pre>
<pre>
 -Corrected an invalid pattern (\R should have been just R), changed
 $^W =1 to BEGIN {$^W=1} to use warnings in compile phase, and corrected
 several unnecessary 'my' declarations. Many thanks to Wolfgang Weisselberg,
 2001-06-12, for catching these errors.
 
 -A '-bar' flag has been added to require braces to always be on the
 right, even for multi-line if and foreach statements.  For example,
 the default formatting of a long if statement would be:</pre>
<pre>
        if ($bigwasteofspace1 &amp;&amp; $bigwasteofspace2
          || $bigwasteofspace3 &amp;&amp; $bigwasteofspace4)
        {
            bigwastoftime();
        }</pre>
<pre>
 With -bar, the formatting is:</pre>
<pre>
        if ($bigwasteofspace1 &amp;&amp; $bigwasteofspace2
          || $bigwasteofspace3 &amp;&amp; $bigwasteofspace4) {
            bigwastoftime();
        }
 Suggested by Eli Fidler 2001-06-11.</pre>
<pre>
 -Uploaded perltidy to sourceforge cvs 2001-06-10.</pre>
<pre>
 -An '-lp' flag (--line-up-parentheses) has been added which causes lists
 to be indented with extra indentation in the manner sometimes
 associated with emacs or the GNU suggestions.  Thanks to Ian Stuart for
 this suggestion and for extensive help in testing it.</pre>
<pre>
 -Subroutine call parameter lists are now formatted as other lists.
 This should improve formatting of tables being passed via subroutine
 calls.  This will also cause full indentation ('-i=n, default n= 4) of
 continued parameter list lines rather than just the number of spaces
 given with -ci=n, default n=2.
 
 -Added support for hanging side comments.  Perltidy identifies a hanging
 side comment as a comment immediately following a line with a side
 comment or another hanging side comment.  This should work in most
 cases.  It can be deactivated with --no-hanging-side-comments (-nhsc).
 The manual has been updated to discuss this.  Suggested by Brad
 Eisenberg some time ago, and finally implemented.</pre>
<p>
</p>
<h2><a name="2001_06_08">2001 06 08</a></h2>
<pre>
 -fixed problem with parsing command parameters containing quoted
 strings in .perltidyrc files. (Reported by Roger Espel Llima 2001-06-07).</pre>
<pre>
 -added two command line flags, --want-break-after and 
 --want-break-before, which allow changing whether perltidy
 breaks lines before or after any operators.  Please see the revised 
 man pages for details.</pre>
<pre>
 -added system-wide configuration file capability.
 If perltidy does not find a .perltidyrc command line file in
 the current directory, nor in the home directory, it now looks
 for '/usr/local/etc/perltidyrc' and then for '/etc/perltidyrc'.
 (Suggested by Roger Espel Llima 2001-05-31).</pre>
<pre>
 -fixed problem in which spaces were trimmed from lines of a multi-line
 quote. (Reported by Roger Espel Llima 2001-05-30).  This is an 
 uncommon situation, but serious, because it could conceivably change
 the proper function of a script.</pre>
<pre>
 -fixed problem in which a semicolon was incorrectly added within 
 an anonymous hash.  (Reported by A.C. Yardley, 2001-5-23).
 (You would know if this happened, because perl would give a syntax
 error for the resulting script).</pre>
<pre>
 -fixed problem in which an incorrect error message was produced
  after a version number on a 'use' line, like this ( Reported 
  by Andres Kroonmaa, 2001-5-14):</pre>
<pre>
              use CGI 2.42 qw(fatalsToBrowser);</pre>
<pre>
  Other than the extraneous error message, this bug was harmless.</pre>
<p>
</p>
<h2><a name="2001_04_06">2001 04 06</a></h2>
<pre>

 -fixed serious bug in which the last line of some multi-line quotes or
  patterns was given continuation indentation spaces.  This may make
  a pattern incorrect unless it uses the /x modifier.  To find
  instances of this error in scripts which have been formatted with
  earlier versions of perltidy, run with the -chk flag, which has
  been added for this purpose (SLH, 2001-04-05).</pre>
<pre>
  ** So, please check previously formatted scripts by running with -chk
  at least once **</pre>
<pre>
 -continuation indentation has been reprogrammed to be hierarchical, 
  which improves deeply nested structures.</pre>
<pre>
 -fixed problem with undefined value in list formatting (reported by Michael
  Langner 2001-04-05)</pre>
<pre>
 -Switched to graphical display of nesting in .LOG files.  If an
  old format string was &quot;(1 [0 {2&quot;, the new string is &quot;{{(&quot;.  This
  is easier to read and also shows the order of nesting.</pre>
<pre>
 -added outdenting of cuddled paren structures, like  &quot;)-&gt;pack(&quot;.</pre>
<pre>
 -added line break and outdenting of ')-&gt;' so that instead of</pre>
<pre>
        $mw-&gt;Label(
          -text   =&gt; &quot;perltidy&quot;,
          -relief =&gt; 'ridge')-&gt;pack;
 
  the current default is:</pre>
<pre>
        $mw-&gt;Label(
          -text   =&gt; &quot;perltidy&quot;,
          -relief =&gt; 'ridge'
        )-&gt;pack;</pre>
<pre>
  (requested by Michael Langner 2001-03-31; in the future this could 
  be controlled by a command-line parameter).</pre>
<pre>
 -revised list indentation logic, so that lists following an assignment
  operator get one full indentation level, rather than just continuation 
  indentation.  Also corrected some minor glitches in the continuation 
  indentation logic.</pre>
<pre>
 -Fixed problem with unwanted continuation indentation after a blank line 
 (reported by Erik Thaysen 2001-03-28):</pre>
<pre>
 -minor update to avoid stranding a single '(' on one line</pre>
<p>
</p>
<h2><a name="2001_03_28_">2001 03 28:</a></h2>
<pre>
 -corrected serious error tokenizing filehandles, in which a sub call 
 after a print or printf, like this:
    print usage() and exit;
 became this:
    print usage () and exit;
 Unfortunately, this converts 'usage' to a filehandle.  To fix this, rerun
 perltidy; it will look for this situation and issue a warning.</pre>
<pre>
 -fixed another cuddled-else formatting bug (Reported by Craig Bourne)</pre>
<pre>
 -added several diagnostic --dump routines
 
 -added token-level whitespace controls (suggested by Hans Ecke)</pre>
<p>
</p>
<h2><a name="2001_03_23_">2001 03 23:</a></h2>
<pre>
 -added support for special variables of the form ${^WANT_BITS}</pre>
<pre>
 -space added between scalar and left paren in 'for' and 'foreach' loops,
  (suggestion by Michael Cartmell):</pre>
<pre>
    for $i( 1 .. 20 )   # old
    for $i ( 1 .. 20 )   # new</pre>
<pre>
 -html now outputs cascading style sheets (thanks to suggestion from
  Hans Ecke)</pre>
<pre>
 -flags -o and -st now work with -html</pre>
<pre>
 -added missing -html documentation for comments (noted by Alex Izvorski)</pre>
<pre>
 -support for VMS added (thanks to Michael Cartmell for code patches and 
   testing)</pre>
<pre>
 -v-strings implemented (noted by Hans Ecke and Michael Cartmell; extensive
   testing by Michael Cartmell)</pre>
<pre>
 -fixed problem where operand may be empty at line 3970 
  (\b should be just b in lines 3970, 3973) (Thanks to Erik Thaysen, 
  Keith Marshall for bug reports)</pre>
<pre>
 -fixed -ce bug (cuddled else), where lines like '} else {' were indented
  (Thanks to Shawn Stepper and Rick Measham for reporting this)</pre>
<p>
</p>
<h2><a name="2001_03_04_">2001 03 04:</a></h2>
<pre>
 -fixed undefined value in line 153 (only worked with -I set)
 (Thanks to Mike Stok, Phantom of the Opcodes, Ian Ehrenwald, and others)

</pre>
<pre>
 -fixed undefined value in line 1069 (filehandle problem with perl versions &lt;
 5.6) (Thanks to Yuri Leikind, Mike Stok, Michael Holve, Jeff Kolber)

</pre>
<p>
</p>
<h2><a name="2001_03_03_">2001 03 03:</a></h2>
<pre>
 -Initial announcement at freshmeat.net; started Change Log
 (Unfortunately this version was DOA, but it was fixed the next day)
</pre>

</body>

</html>
