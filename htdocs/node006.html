<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
  <TITLE>Cleaning up code from a code generator</TITLE>
  <META NAME="GENERATOR" CONTENT="alconv $Revision: 1.5 $ by Galen and Steven Hancock">
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
</HEAD>
<BODY bgcolor="#A0E0E0">
<DIV ALIGN=CENTER>
<A HREF="node005.html"><IMG SRC="prev.gif" ALT="Previous" border=0></A>
<A HREF="node007.html"><IMG SRC="next.gif" ALT="Next" border=0></A>
<A HREF="node000.html#node006"><IMG SRC="up.gif" ALT="Up" border=0></A>
</DIV>
<DIV ALIGN=center>
<h1>Cleaning up code from a code generator</h1>
</DIV>
A good application of perltidy is to clean up code which has been produced
by a code generator.  Here is a snippet from <code>weave.pl</code>,
which in turn was produced from <code>weave.web</code> with
a literate programming tool
(see <a href="http://users.ox.ac.uk/~pemb0468/webperl/">webperl</a>).
Here is the input file <code>weave.t</code>.  (Note: the original
code is one long line, but it has been wrapped at 80 columns here
for display purposes only).
<hr>
<pre>
# 31
elsif (/\|/) {            if ($nextchar eq &quot;\|&quot;)  {
$_=$formatter{&quot;or&quot;} ;            } else {
$_=&quot;\$\\|\$&quot;; }        } elsif (/_/) {            $_=&quot;\\_{}&quot;;        }
elsif (/\\\\/) {            $_=&quot;\\&quot;;        } elsif (/\$/) {
$_=&quot;\\\$&quot;;        } elsif (/\^/) {           $_=&quot;\\\^{}&quot;;        } elsif
(/&lt;|&gt;/) {           $_=&quot;\$$_\$&quot;;        } elsif (/%/) {
$_=&quot;\\%&quot;;        } elsif ($_ eq $hash) {            $_=&quot;\\$hash&quot;;}	     
</pre>
<hr>
The command <code> perltidy weave.t </code> produces <code> weave.t.tdy</code>
containing this result:
<hr>
<pre>
# 31
elsif (/\|/) {
    if ( $nextchar eq &quot;\|&quot; ) {
        $_ = $formatter{&quot;or&quot;};
    }
    else {
        $_ = &quot;\$\\|\$&quot;;
    }
}
elsif (/_/)    { $_ = &quot;\\_{}&quot;; }
elsif (/\\\\/) { $_ = &quot;\\&quot;; }
elsif (/\$/)   {
    $_ = &quot;\\\$&quot;;
}
elsif (/\^/)  { $_ = &quot;\\\^{}&quot;; }
elsif (/&lt;|&gt;/) { $_ = &quot;\$$_\$&quot;; }
elsif (/%/)   {
    $_ = &quot;\\%&quot;;
}
elsif ( $_ eq $hash ) { $_ = &quot;\\$hash&quot;; }
</pre>
<hr>
This ability to reformat code produced by a code generator can
be invaluable if the code needs to be debugged.
<DIV ALIGN=CENTER>
<A HREF="node005.html"><IMG SRC="prev.gif" ALT="Previous" border=0></A>
<A HREF="node007.html"><IMG SRC="next.gif" ALT="Next" border=0></A>
<A HREF="node000.html#node006"><IMG SRC="up.gif" ALT="Up" border=0></A>
</DIV>
</BODY>
</HTML>
